<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>To-Do List</title>

<style>
    body {
        background: url('background.jpg') no-repeat center top;
        background-size: cover;
        background-attachment: fixed;


        font-family:'Lucida Sans';
        display: flex;
        justify-content: center ;
        padding-top: 30px;
        min-height: 10vh;
}

    h3 {
        font-weight: bold;
        font-style: italic;
}


    .boxStyle{
        width:350px;
        background:rgb(199, 216, 222);
        padding:20px;
        border-radius:12px;
        box-shadow:0 4px 10px rgba(0,0,0,0.1);
    }

    h3{ text-align:center; }

    .dataArea{
        display:flex;
        gap:10px;
    }

    input{
        flex:1;
        padding:8px;
        border:1px solid #ccc;
        border-radius:6px;
        outline:none;
    }

    #addBtn{
        padding:8px 16px;
        background:#5f828a;
        color:white;
        border:none;
        border-radius:6px;
        cursor:pointer;
    }

    #search{
        width:76%;
        margin-top:12px;
        padding:8px;
        border-radius:6px;
        border:1px solid #ccc;
    }

    ul{ list-style:none; padding:0; margin-top:20px; }

    li{
        background:#ffffff;
        padding:10px;
        border-radius:6px;
        margin-bottom:10px;
        display:flex;
        justify-content:space-between;
        align-items:center;
        border:1px solid #5f828a;

        opacity:0;
        transform:translateY(10px);
        transition:0.4s ease;
    }

    .show{
        opacity:1;
        transform:translateY(0);
    }

    .left{
        display:flex;
        align-items:center;
        gap:8px;
    }

    .circle{
        width:10px;
        height:10px;
        border-radius:40%;
        border:1.5px solid #5f828a;
        cursor:pointer;
    }

    .completed .circle{
        background:#88e0ad;
        border-color:#5f828a;
    }

    .completed span{
        color:#7d7d7d;
    }

    .deleteBtn{
        background:none;
        border:none;
        color:red;
        cursor:pointer;
        font-weight:bold;
    }




</style>
</head>
<body>

<div class="boxStyle">

    <h2>To-Do List</h2>

    <div class="dataArea">
        <input id="taskInput" type="text" placeholder="Add a task">
        <button id="addBtn">Add</button>
    </div>

    <input id="search" type="text" placeholder="Search…">

    <h3 id="noResult" style="text-align:center; color:#104d57; display:none;">
    You didn’t find any tasks :|
    </h3>


    <h3 id="yourTitle" style="margin-top:20px; text-align:center; display:none;">Your Tasks</h3>
    <ul id="taskList"></ul>

    <h3 id="completedTitle" style="margin-top:20px; text-align:center; display:none;">Completed Tasks</h3>
    <ul id="completedList"></ul>


</div>

<script>
    const input = document.getElementById("taskInput");
    const addBtn = document.getElementById("addBtn");
    const list = document.getElementById("taskList");
    const search = document.getElementById("search");
    const completedList = document.getElementById("completedList");
    const yourTitle = document.getElementById("yourTitle");
    const completedTitle = document.getElementById("completedTitle");



    //Load saved tasks
    window.onload = () => {
        // Get tasks from local storage or create an empty array
        const saved = JSON.parse(localStorage.getItem("tasks")) || [];
        // Create a row for each saved task
        saved.forEach(t => addTask(t.text, t.completed, false));
        updateTitles();

    };

    // Save current tasks to the browser memory
    function saveTasks(){
    const tasks = [];
    document.querySelectorAll("li").forEach(taskItem => {
        tasks.push({
            text: taskItem.querySelector("span").textContent,
            completed: taskItem.classList.contains("completed")
        });
    });
    localStorage.setItem("tasks", JSON.stringify(tasks));
}

    //Show or Hide section titles based on list content
    function updateTitles(){
    // Your Tasks
    if(list.children.length > 0){
        yourTitle.style.display = "block";
    }else{
        yourTitle.style.display = "none";
    }

    // Completed Tasks
    if(completedList.children.length > 0){
        completedTitle.style.display = "block";
    }else{
        completedTitle.style.display = "none";
    }
}



    //Add Task, the main function to create a task row
    function addTask(text, isCompleted=false, animate=true){
    const taskItem = document.createElement("li");

    // Build the inside of the <li>
    taskItem.innerHTML =
        '<div class="left">' +
        '<div class="circle"></div>' + '<span>' + text + '</span>' +
        '</div>' + '<button class="deleteBtn">Delete</button>';

    if(isCompleted){
        taskItem.classList.add("completed");
        completedList.appendChild(taskItem);
    } else {
        list.appendChild(taskItem);
    }

    if(animate){
        setTimeout(() => taskItem.classList.add("show"), 50);
    } else {
        taskItem.classList.add("show");
    }

    saveTasks(); // save to memory
    updateTitles();

}


    //Add on click
    addBtn.onclick = () => {
        if(input.value.trim() !== ""){
            addTask(input.value.trim());
            input.value = "";
        }
    };

    //Add on Enter key
    input.addEventListener("keydown", enter => {
        if(enter.key === "Enter"){
            addBtn.click();
        }
    });

    // Search
    search.addEventListener("input", () => {
    const myWords = search.value.toLowerCase(); // The word we are searching for
    let found = false; //start by assuming no tasks are found

    document.querySelectorAll("li").forEach(myTask => {
        const taskText = myTask.querySelector("span").textContent.toLowerCase(); // task text

        // if task contains the search word, show it. Otherwise hide tasks
        if(taskText.includes(myWords)){
            myTask.style.display = "flex"; //display
            found = true;
        }else{
            myTask.style.display = "none"; //hide
        }
    });

    // Show "No Results" message if nothing is found
    document.getElementById("noResult").style.display =
        found ? "none" : "block";
});


// Handle clicks on "Delete" or "Complete" buttons
// Complete + Delete
document.addEventListener("click", (event) => {
    const myTask = event.target.closest("li");

    if(!myTask) return;

    // complete toggle
    if(event.target.classList.contains("circle")){
        myTask.classList.toggle("completed");

        if(myTask.classList.contains("completed")){
            completedList.appendChild(myTask);
        }else{
            list.appendChild(myTask);
        }

        saveTasks();
        updateTitles();
    }

    // delete
    if(event.target.classList.contains("deleteBtn")){
        myTask.remove();
        saveTasks();
        updateTitles();
    }
});

</script>


</body>
</html>



